{% extends "base.html" %}
{% block head_title %}Play{% endblock %}
{% block head %}
<style>
    input{
        background: rgba( 0, 0, 0, 0.3 );
        box-shadow: 0 8px 32px 0 rgba( 31, 38, 135, 0.37 );
        backdrop-filter: blur( 13.5px );
        -webkit-backdrop-filter: blur( 13.5px );
    }
</style>
{% endblock %}
{% block content %}


<div class="container flex justify-center">

<div class="rounded lg:w-1/3  md:w-1/2 w-full p-10 mt-16 bg-clip-padding backdrop-filter backdrop-blur-xl bg-opacity-60 bg-color-nblue-700 border border-nblue mb-10" style="background-color: rgba(0, 42, 42, .6);">
    <p tabindex="0" class="inline text-nblue focus:outline-none text-m font-extrabold leading-6 self-start place-self-start"><span class="border border-nblue rounded"><span class="ml-3 mr-3">Level: {{question.level}}</span></span></p> 
    <p tabindex="0" class="inline text-nblue focus:outline-none text-m font-extrabold leading-6 self-start place-self-start"><span class="border border-nblue rounded"><span class="ml-3 mr-3">Points: {{question.points}}</span></span></p> <br>
  <center><p tabindex="0" class="text-nblue focus:outline-none text-2xl font-extrabold leading-6 mt-7">{{question.question_text | safe}}</p>
    
    <div class="w-full flex items-center justify-between py-5">
        <!-- <hr class="w-full border border-nblue">-->
        {% if question.img_url %}
        <div class="flex w-full justify-center">
        <img src="{{question.img_url}}" class="w-1/2"></div>
        {% endif %}
        </div>
        <form id="answer_form" action="{% url 'check_ans' %}" method="POST">
        {% csrf_token %}
        <input id="answer" name="answer" type="text" class="block mr-3 rounded border border-nblue w-full text-nblue p-3" required>
        
        <div class="mt-8">
            <button role="button" id="submit" class="border border-nblue focus:ring-2 focus:ring-offset-2 focus:ring-indigo-700 text-sm font-semibold leading-none text-white focus:outline-none rounded hover:bg-nblue-500 hover:text-black py-4 w-1/2">Check</button>
        </div></form></center>
</div></div>
{% endblock %}
{% block scripts %}
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
<script>
    $("#answer_form").submit(function (e){
        e.preventDefault();
        var button = document.getElementById("submit");
        button.disabled = true;
        var serializedData = $(this).serialize();
        $.ajax({
            type:'POST',
            url:'{% url "check_ans" %}',
            data:serializedData,
            success:function(json){
                showToast("Correct ðŸŽ‰",1000)
                var ansinput = document.getElementById("answer");
                ansinput.value = "";
                location.reload();
            },
            error : function(response) {
                var ansinput = document.getElementById("answer");
                ansinput.value = "";
                button.disabled = false;
                showToast("Incorrect ðŸ˜¢",1000)
        }
        });
    });
</script>
</script>
{% endblock %}